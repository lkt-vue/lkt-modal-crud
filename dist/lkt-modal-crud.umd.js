(function(t,l){typeof exports=="object"&&typeof module<"u"?module.exports=l(require("vue")):typeof define=="function"&&define.amd?define(["vue"],l):(t=typeof globalThis<"u"?globalThis:t||self,t.LktModalCrud=l(t.Vue))})(this,function(t){"use strict";const l={name:"LktModalCrud",inheritAttrs:!1},f=t.defineComponent({...l,props:{modelValue:{type:Object,required:!1,default:()=>({})},palette:{type:String,default:""},size:{type:String,default:""},preTitle:{type:String,default:""},title:{type:String,default:""},showClose:{type:Boolean,default:!0},disabledClose:{type:Boolean,default:!1},disabledVeilClick:{type:Boolean,default:!1},modalName:{type:String,default:""},modalKey:{type:[String,Number],default:"_"},zIndex:{type:Number,default:500},editModeText:{type:String,default:"Edition Mode"},saveText:{type:String,default:"Save"},dropText:{type:String,default:"Delete"},editedCloseConfirm:{type:String,default:""},editedCloseConfirmKey:{type:[String,Number],default:"_"},readResource:{type:String,required:!0},createResource:{type:String,required:!1},updateResource:{type:String,required:!1},dropResource:{type:String,required:!1},readData:{type:Object,required:!1,default:()=>({})},createData:{type:Object,required:!1,default:()=>({})},updateData:{type:Object,required:!1,default:()=>({})},dropData:{type:Object,required:!1,default:()=>({})},isCreate:{type:Boolean,default:!1},createConfirm:{type:String,default:""},updateConfirm:{type:String,default:""},dropConfirm:{type:String,default:""},createDisabled:{type:Boolean,default:!1},updateDisabled:{type:Boolean,default:!1},dropDisabled:{type:Boolean,default:!1},saveValidator:{type:Function,required:!1,default:()=>!0}},emits:["update:modelValue","read","created","updated","dropped","perms"],setup(e,{emit:n}){const o=e,c=t.useSlots(),i=n,r=t.ref(o.modelValue),m=t.ref([]),p=t.ref(!1),y=t.ref(null),C=t.ref(!1),s=t.ref(!1);t.watch(()=>o.modelValue,a=>r.value=a),t.watch(r,a=>i("update:modelValue",a),{deep:!0});const b=a=>C.value=!0,S=a=>i("read",a),k=a=>s.value=a,g=a=>{m.value=a,i("perms",a)},D=t.computed(()=>s.value?o.editedCloseConfirm:"");return(a,u)=>{const h=t.resolveComponent("lkt-item-crud"),V=t.resolveComponent("lkt-modal");return t.openBlock(),t.createBlock(V,{"pre-title":e.preTitle,title:e.title,"modal-name":e.modalName,"modal-key":e.modalKey,"z-index":e.zIndex,palette:e.palette,size:e.size,"show-close":e.showClose,"disabled-close":e.disabledClose,"disabled-veil-click":e.disabledVeilClick,"close-confirm":D.value,"close-confirm-key":e.editedCloseConfirmKey},t.createSlots({default:t.withCtx(()=>[t.createVNode(h,{ref:d=>y.value=d,modelValue:r.value,"onUpdate:modelValue":u[0]||(u[0]=d=>r.value=d),"create-resource":e.createResource,onPerms:g,onRead:S,onError:b,onModifiedData:k,"read-resource":e.readResource,"read-data":e.readData,"drop-confirm":e.dropConfirm,"drop-resource":e.dropResource,"drop-data":e.dropData,"update-confirm":e.updateConfirm,"update-resource":e.updateResource,"update-data":e.updateData,"drop-disabled":e.dropDisabled,"create-disabled":e.createDisabled,"update-disabled":e.updateDisabled,"is-create":e.isCreate,"save-validator":e.saveValidator},{item:t.withCtx(({item:d,editMode:M,loading:q,isCreate:R,canUpdate:w,canDrop:B})=>[t.renderSlot(a.$slots,"item",{item:d,loading:q,editMode:M,isCreate:R,canUpdate:w,canDrop:B})]),_:3},8,["modelValue","create-resource","read-resource","read-data","drop-confirm","drop-resource","drop-data","update-confirm","update-resource","update-data","drop-disabled","create-disabled","update-disabled","is-create","save-validator"])]),_:2},[t.unref(c)["pre-title"]?{name:"pre-title",fn:t.withCtx(({item:d})=>[t.renderSlot(a.$slots,"pre-title",{item:d,loading:a.loading,editMode:p.value,isCreate:e.isCreate,canUpdate:a.canUpdate,canDrop:a.canDrop})]),key:"0"}:void 0]),1032,["pre-title","title","modal-name","modal-key","z-index","palette","size","show-close","disabled-close","disabled-veil-click","close-confirm","close-confirm-key"])}}});return{install:(e,n)=>{e.component("lkt-modal-crud",f)}}});
