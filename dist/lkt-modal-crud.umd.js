(function(e,l){typeof exports=="object"&&typeof module<"u"?module.exports=l(require("vue")):typeof define=="function"&&define.amd?define(["vue"],l):(e=typeof globalThis<"u"?globalThis:e||self,e.LktModalCrud=l(e.Vue))})(this,function(e){"use strict";const l={name:"LktModalCrud",inheritAttrs:!1},c=e.defineComponent({...l,props:{modelValue:{type:Object,required:!1,default:()=>({})},palette:{type:String,default:""},size:{type:String,default:""},preTitle:{type:String,default:""},title:{type:String,default:""},loading:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},disabledClose:{type:Boolean,default:!1},disabledVeilClick:{type:Boolean,default:!1},modalName:{type:String,default:""},modalKey:{type:[String,Number],default:"_"},zIndex:{type:Number,default:500},editModeText:{type:String,default:"Edition Mode"},saveText:{type:String,default:"Save"},dropText:{type:String,default:"Delete"},editedCloseConfirm:{type:String,default:""},editedCloseConfirmKey:{type:[String,Number],default:"_"},readResource:{type:String,required:!0},createResource:{type:String,required:!1},updateResource:{type:String,required:!1},dropResource:{type:String,required:!1},readData:{type:Object,required:!1,default:()=>({})},createData:{type:Object,required:!1,default:()=>({})},updateData:{type:Object,required:!1,default:()=>({})},dropData:{type:Object,required:!1,default:()=>({})},saveIsCreate:{type:Boolean,default:!1},createConfirm:{type:String,default:""},updateConfirm:{type:String,default:""},dropConfirm:{type:String,default:""},createDisabled:{type:Boolean,default:!1},updateDisabled:{type:Boolean,default:!1},dropDisabled:{type:Boolean,default:!1}},emits:["update:modelValue","read","created","updated","dropped","perms"],setup(t,{emit:u}){const o=t,m=e.useSlots(),s=u,r=e.ref(o.modelValue),p=e.ref([]),y=e.ref(!1),C=e.ref(null),i=e.ref(o.loading),b=e.ref(!1),f=e.ref(!1);e.watch(()=>o.modelValue,a=>{r.value=a}),e.watch(()=>o.loading,a=>i.value=a),e.watch(r,a=>{s("update:modelValue",a)},{deep:!0});const g=a=>{i.value=!1,b.value=!0},S=a=>{i.value=!1,s("read",a)},k=a=>{f.value=a},D=e.computed(()=>f.value?o.editedCloseConfirm:"");return(a,n)=>{const h=e.resolveComponent("lkt-item-crud"),M=e.resolveComponent("lkt-modal");return e.openBlock(),e.createBlock(M,{"pre-title":t.preTitle,title:t.title,"modal-name":t.modalName,"modal-key":t.modalKey,"z-index":t.zIndex,palette:t.palette,size:t.size,loading:i.value,"show-close":t.showClose,"disabled-close":t.disabledClose,"disabled-veil-click":t.disabledVeilClick,"close-confirm":D.value,"close-confirm-key":t.editedCloseConfirmKey},e.createSlots({default:e.withCtx(()=>[e.createVNode(h,{ref:d=>C.value=d,modelValue:r.value,"onUpdate:modelValue":n[0]||(n[0]=d=>r.value=d),"create-resource":t.createResource,onPerms:n[1]||(n[1]=d=>p.value=d),onRead:S,onError:g,onModifiedData:k,"read-resource":t.readResource,"read-data":t.readData,"drop-confirm":t.dropConfirm,"drop-resource":t.dropResource,"drop-data":t.dropData,"update-confirm":t.updateConfirm,"update-resource":t.updateResource,"update-data":t.updateData,"drop-disabled":t.dropDisabled,"create-disabled":t.createDisabled,"update-disabled":t.updateDisabled},{item:e.withCtx(({item:d,editMode:V,loading:x})=>[e.renderSlot(a.$slots,"item",{item:d,loading:x,editMode:V})]),_:3},8,["modelValue","create-resource","read-resource","read-data","drop-confirm","drop-resource","drop-data","update-confirm","update-resource","update-data","drop-disabled","create-disabled","update-disabled"])]),_:2},[e.unref(m)["pre-title"]?{name:"pre-title",fn:e.withCtx(({item:d})=>[e.renderSlot(a.$slots,"pre-title",{item:d,editMode:y.value})]),key:"0"}:void 0]),1032,["pre-title","title","modal-name","modal-key","z-index","palette","size","loading","show-close","disabled-close","disabled-veil-click","close-confirm","close-confirm-key"])}}});return{install:(t,u)=>{t.component("lkt-modal-crud",c)}}});
