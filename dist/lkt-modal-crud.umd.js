(function(t,o){typeof exports=="object"&&typeof module<"u"?module.exports=o(require("vue"),require("lkt-button"),require("lkt-field-switch"),require("lkt-item-crud"),require("lkt-loader"),require("lkt-modal")):typeof define=="function"&&define.amd?define(["vue","lkt-button","lkt-field-switch","lkt-item-crud","lkt-loader","lkt-modal"],o):(t=typeof globalThis<"u"?globalThis:t||self,t.LktModalCrud=o(t.Vue,t.LktButton,t.LktFieldSwitch,t.LktItemCrud,t.LktLoader,t.LktModal))})(this,function(t,o,C,h,b,S){"use strict";const r=e=>e&&typeof e=="object"&&"default"in e?e:{default:e},D=r(o),L=r(C),q=r(h),B=r(b),w=r(S),V={name:"LktModalCrud",inheritAttrs:!1},g=t.defineComponent({...V,props:{modelValue:{type:Object,required:!1,default:()=>({})},palette:{type:String,default:""},size:{type:String,default:""},preTitle:{type:String,default:""},title:{type:String,default:""},showClose:{type:Boolean,default:!0},disabledClose:{type:Boolean,default:!1},disabledVeilClick:{type:Boolean,default:!1},modalName:{type:String,default:""},modalKey:{type:[String,Number],default:"_"},zIndex:{type:Number,default:500},editModeText:{type:String,default:"Edition Mode"},saveText:{type:String,default:"Save"},dropText:{type:String,default:"Delete"},hiddenSave:{type:Boolean,default:!1},hiddenDrop:{type:Boolean,default:!1},hiddenButtons:{type:Boolean,default:!1},editedCloseConfirm:{type:String,default:""},editedCloseConfirmKey:{type:[String,Number],default:"_"},readResource:{type:String,required:!1},createResource:{type:String,required:!1},updateResource:{type:String,required:!1},dropResource:{type:String,required:!1},readData:{type:Object,required:!1,default:()=>({})},createData:{type:Object,required:!1,default:()=>({})},updateData:{type:Object,required:!1,default:()=>({})},dropData:{type:Object,required:!1,default:()=>({})},isCreate:{type:Boolean,default:!1},createConfirm:{type:String,default:""},updateConfirm:{type:String,default:""},dropConfirm:{type:String,default:""},createDisabled:{type:Boolean,default:!1},updateDisabled:{type:Boolean,default:!1},dropDisabled:{type:Boolean,default:!1},saveValidator:{type:Function,required:!1,default:()=>!0}},emits:["update:modelValue","read","create","update","drop","perms"],setup(e,{emit:y}){const n=e,v=t.useSlots(),l=y,i=t.ref(n.modelValue),x=t.ref([]),M=t.ref(null),R=t.ref(!1),k=t.ref(!1);t.watch(()=>n.modelValue,d=>i.value=d),t.watch(i,d=>l("update:modelValue",d),{deep:!0});const z=d=>R.value=!0,j=d=>l("read",d),T=d=>l("create",d),N=d=>l("update",d),O=d=>l("drop",d),E=d=>k.value=d,I=d=>{x.value=d,l("perms",d)},K=t.computed(()=>k.value?n.editedCloseConfirm:"");return(d,p)=>{const F=t.resolveComponent("lkt-item-crud"),U=t.resolveComponent("lkt-modal");return t.openBlock(),t.createBlock(U,{"pre-title":e.preTitle,title:e.title,"modal-name":e.modalName,"modal-key":e.modalKey,"z-index":e.zIndex,palette:e.palette,size:e.size,"show-close":e.showClose,"disabled-close":e.disabledClose,"disabled-veil-click":e.disabledVeilClick,"close-confirm":K.value,"close-confirm-key":e.editedCloseConfirmKey},t.createSlots({default:t.withCtx(()=>[t.createVNode(F,{ref:a=>M.value=a,modelValue:i.value,"onUpdate:modelValue":p[0]||(p[0]=a=>i.value=a),"create-resource":e.createResource,onPerms:I,onRead:j,onCreate:T,onUpdate:N,onDrop:O,onError:z,onModifiedData:E,"read-resource":e.readResource,"read-data":e.readData,"drop-confirm":e.dropConfirm,"drop-resource":e.dropResource,"drop-data":e.dropData,"update-confirm":e.updateConfirm,"update-resource":e.updateResource,"update-data":e.updateData,"drop-disabled":e.dropDisabled,"create-disabled":e.createDisabled,"update-disabled":e.updateDisabled,"is-create":e.isCreate,"save-validator":e.saveValidator,"hidden-save":e.hiddenSave,"hidden-drop":e.hiddenDrop,"hidden-buttons":e.hiddenButtons},{item:t.withCtx(({item:a,editMode:u,loading:s,isCreate:f,canUpdate:c,canDrop:m})=>[t.renderSlot(d.$slots,"item",{item:a,loading:s,editMode:u,isCreate:f,canUpdate:c,canDrop:m})]),_:3},8,["modelValue","create-resource","read-resource","read-data","drop-confirm","drop-resource","drop-data","update-confirm","update-resource","update-data","drop-disabled","create-disabled","update-disabled","is-create","save-validator","hidden-save","hidden-drop","hidden-buttons"])]),_:2},[t.unref(v)["pre-title"]?{name:"pre-title",fn:t.withCtx(({item:a,loading:u,editMode:s,isCreate:f,canUpdate:c,canDrop:m})=>[t.renderSlot(d.$slots,"pre-title",{item:a,loading:u,editMode:s,isCreate:f,canUpdate:c,canDrop:m})]),key:"0"}:void 0]),1032,["pre-title","title","modal-name","modal-key","z-index","palette","size","show-close","disabled-close","disabled-veil-click","close-confirm","close-confirm-key"])}}});return{install:(e,y)=>{e.component("lkt-modal-crud")===void 0&&e.component("lkt-modal-crud",g),e.component("lkt-button")===void 0&&e.use(D.default),e.component("lkt-field-switch")===void 0&&e.use(L.default),e.component("lkt-item-crud")===void 0&&e.use(q.default),e.component("lkt-loader")===void 0&&e.use(B.default),e.component("lkt-modal")===void 0&&e.use(w.default)}}});
